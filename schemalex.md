### はじめに

こんにちは。現在アプリボットで内定者バイトをしている伊藤です。
今回は、schemalexを使用したマイグレーションファイルの自動生成の手法について紹介したいと思います。


### 導入背景

現在担当しているプロジェクトは絶賛開発段階で、MySQLのスキーマは変更される度にDBをリセットしています。
つまりマイグレーションが必要ない状態です。
しかし今後リリースする際には毎回リセットするわけにはいかないので、
今回マイグレーションファイルを自動で生成するツールを作成することになりました。

また、MySQLのDDLはPlantUMLから自動生成しています。
PlantUMLにEntityを定義してそのEntity情報から一つのマイグレーションファイルを毎回再生成する形をとっています

   1. PlantUMLでEntityを定義
   2. PlantUMLのEntity情報から初期マイグレーション用のSQLファイルを作成

   現在担当しているプロジェクトでは、MySQLを使用しておりそのスキーマ定義は、PluntUMLを使用して定義しています。
   マイグレーションファイルを自動生成すること
   DDLとして生のSQLは使ってない（plumtUMLを使用）
   常にスキーマを変更していく流れで開発している（plumtUMLには差分を入れない）
   -> 運用になった時に、毎回リセットするわけにはいかないので、マイグレーションを自動生成

### 構成



Schemalexの説明

-> 2つのスキーマから差分のSQLを作成してくれるぐらい

-> 2つのスキーマが必要
 -> マイグレーション差分出し用のコンテナがあること（古いスキーマを持った状態）
 -> init用（plumtUMLから生成）SQLがあることも書く

### 実装1 Linter抜き

goの実装
or
shスクリプトの実装

### 結果

実行結果
Create文と
ALTER TABLE文が載ってるものを表示

### 実装2 Linterあり（あるかわからない

goの実装
or
shスクリプトの実装

### 結果

実行結果
Create文と
ALTER TABLE文が載ってるものを表示

### まとめ

Formatterを別途採用できないか
